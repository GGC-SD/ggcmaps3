var campus={map:"Building/(Campus)/campus.html",buildings:[{id:"2",name:"2000",dir:"Building/2000/",floorIndex:0,floors:[{id:"1",map:"First-Floor.html",roomNames:[]}]},{id:"3",name:"3000",dir:"Building/3000/",floorIndex:1,floors:[{id:"1",map:"First-Floor.html",roomNames:[]},{id:"2",map:"Second-Floor.html",roomNames:[]},{id:"3",map:"Third-Floor.html",roomNames:[]},{id:"4",map:"Fourth-Floor.html",roomNames:[]}]},{id:"A",name:"Building A",dir:"Building/A/",floorIndex:0,floors:[{id:"1",map:"First-Floor.html",roomNames:[{name:"food-court",id:"1800"},{name:"chick-fil-a",id:"chickfila"},{name:"CFA",id:"chickfila"},{name:"chickfila",id:"chickfila"},{name:"chick-fil",id:"chickfila"},{name:"chick",id:"chickfila"},{name:"panda-express",id:"pandaexpress"},{name:"panda",id:"pandaexpress"},{name:"moe-s-southwest-grill",id:"moes"},{name:"moe-s",id:"moes"},{name:"moes",id:"moes"},{name:"pod-market",id:"1825"},{name:"pod",id:"1825"},{name:"the-den",id:"1510"},{name:"den",id:"1510"},{name:"dining-services",id:"1850"},{name:"technology-help-desk",id:"1040"},{name:"help-desk",id:"1040"}]}]},{id:"B",name:"Building B",dir:"Building/B/",floorIndex:0,floors:[{id:"1",map:"first-floor.html",roomNames:[{name:"einstein-bros-bagels",id:"einsteinbrosbagels"},{name:"einstein-bros",id:"einsteinbrosbagels"},{name:"einstein-s",id:"einsteinbrosbagels"},{name:"einsteins",id:"einsteinbrosbagels"}]},{id:"2",map:"second-floor.html",roomNames:[{name:"human-resources",id:"2500"}]},{id:"3",map:"third-floor.html",roomNames:[{name:"president-s-office",id:"3500"},{name:"office-of-the-president",id:"3500"}]}]},{id:"C",name:"Building C",dir:"Building/C/",floorIndex:0,floors:[{id:"1",map:"First-Floor.html",roomNames:[{name:"cisco-auditorium",id:"1260"},{name:"cisco",id:"1260"}]},{id:"2",map:"Second-Floor.html",roomNames:[]}]},{id:"W",name:"Building W",dir:"Building/W/",floorIndex:0,floors:[{id:"G",map:"Ground-Floor.html",roomNames:[{name:"acedemic enhancement center",id:"g360"},{name:"aec",id:"g360"}]},{id:"1",map:"First-Floor.html",roomNames:[{name:"public-safety",id:"1501"},{name:"public-safety-office",id:"1501"},{name:"Office-of-public-safety",id:"1501"},{name:"campus-police",id:"1501"},{name:"police",id:"1501"},{name:"campus-security",id:"1501"},{name:"onestop",id:"onestop"},{name:"one-stop",id:"onestop"},{name:"one-stop-shop",id:"onestop"},{name:"testing-services",id:"1301"},{name:"testing",id:"1301"},{name:"disability-service",id:""},{name:"disability",id:""},{name:"parking-services",id:"1123"},{name:"parking",id:"1123"},{name:"registrar",id:"1129"},{name:"registrar-office",id:"1129"},{name:"student-accounts",id:"1147"}]},{id:"2",map:"Second-Floor.html",roomNames:[{name:"office-of-internationalization",id:"2100"},{name:"internationalization",id:"2100"}]}]},{id:"D",name:"Building D",dir:"Building/D/",floorIndex:0,floors:[{id:"1",map:"First-Floor.html",roomNames:[]},{id:"2",map:"Second-Floor.html",roomNames:[]}]},{id:"E",name:"Building E",dir:"Building/E/",floorIndex:0,floors:[{id:"1",map:"First-Floor.html",roomNames:[{name:"Game-Room",id:"gameroom"},{name:"Dining-Hall",id:"dininghall"},{name:"Dining-Area",id:"dininghall"},{name:"Dining",id:"dininghall"},{name:"Multi-Purpose-room",id:"multipurposeroom"},{name:"Private-Dining",id:"privatedining"},{name:"Food-Stations",id:"foodstations"},{name:"Kitchen-Area",id:"kitchenarea"},{name:"Kitchen",id:"kitchenarea"},{name:"Outdoor-Dining",id:"outdoordining"}]},{id:"2",map:"Second-Floor.html",roomNames:[{name:"bookstore",id:"bookstore"},{name:"barnes-and-noble",id:"bookstore"},{name:"terrace",id:"terrace"},{name:"lvis",id:"lvis"},{name:"Catering-Kitchen",id:"cateringkitchen"},{name:"lounge",id:"lounge"},{name:"Info-Desk",id:"infodesk"},{name:"career-services",id:"2130"},{name:"career-development",id:"2130"},{name:"office-of-career-services",id:"2130"},{name:"student-integrity",id:"2150"},{name:"office-of-student-integrity",id:"2150"}]},{id:"3",map:"Third-Floor.html",roomNames:[{name:"mail-room",id:"3103"},{name:"claw-card-office",id:"3107"},{name:"claw-card",id:"3107"},{name:"office-of-get-involved",id:"3120"},{name:"get-involved",id:"3120"},{name:"student-involvement-center",id:"3130"},{name:"rso-lounge",id:"3130"},{name:"rso",id:"3130"},{name:"globe-office",id:"3151"},{name:"globe",id:"3151"},{name:"office-of-student-affairs",id:"3140"},{name:"student-affairs",id:"3140"},{name:"sga",id:"3132"},{name:"sga-office",id:"3132"},{name:"office-of-sga",id:"3132"},{name:"office-of-the-student-government-association",id:"3132"},{name:"student-government",id:"3132"},{name:"office-of-volunteer-ggc",id:"3133"},{name:"volunteer-ggc",id:"3133"},{name:"volunteer",id:"3133"},{name:"office-of-greenlight-activities-board",id:"3134"},{name:"greenlight-office",id:"3134"},{name:"greenlight",id:"3134"}]}]},{id:"F",name:"Building F",dir:"Building/F/",floorIndex:0,floors:[{id:"1",map:"First-Floor.html",roomNames:[{name:"Jr-Olympic-Pool",id:"jrolympicpool"},{name:"Swimming-Pool",id:"jrolympicpool"},{name:"Pool",id:"jrolympicpool"},{name:"Basketball-Court",id:"basketballcourt"},{name:"Basketball",id:"basketballcourt"},{name:"Racquet-Ball",id:"racquetballcourt1"},{name:"Racquet-Ball-Court",id:"racquetballcourt1"},{name:"Racquet-Ball-Court-1",id:"racquetballcourt1"},{name:"Racquet-Ball-Court-2",id:"racquetballcourt2"},{name:"Racquet-Ball-Court-3",id:"racquetballcourt3"},{name:"Mens-Lockers",id:"menslockers"},{name:"Mens-Locker",id:"menslockers"},{name:"Mens-Locker-Room",id:"menslockers"},{name:"Men-s-Lockers",id:"menslockers"},{name:"Men-s-Locker-Room",id:"menslockers"},{name:"Womens-Lockers",id:"womenslockers"},{name:"Womens-Locker",id:"womenslockers"},{name:"Women-s-Lockers",id:"womenslockers"},{name:"Women-s-Locker-Room",id:"womenslockers"}]},{id:"2",map:"Second-Floor.html",roomNames:[{name:"Weight-Machines",id:"weightmachines"},{name:"Free-Weights",id:"freeweights"},{name:"Weight-Room",id:"freeweights"},{name:"Weights-Room",id:"freeweights"},{name:"Aerobics",id:"aerobics"},{name:"Spin-Room",id:"spinroom"},{name:"Cardio",id:"cardio"},{name:"Elevated-Track",id:"elevatedtrack"},{name:"Indoor-Track",id:"elevatedtrack"},{name:"Track",id:"elevatedtrack"}]}]},{id:"H",name:"Building H",dir:"Building/H/",floorIndex:0,floors:[{id:"1",map:"First-Floor.html",roomNames:[{name:"digital-media-lab",id:"1210"},{name:"digital-media",id:"1210"}]},{id:"2",map:"Second-Floor.html",roomNames:[]},{id:"3",map:"Third-Floor.html",roomNames:[]}]},{id:"I",name:"Building I",dir:"Building/I/",floorIndex:0,floors:[{id:"1",map:"First-Floor.html",roomNames:[]},{id:"2",map:"Second-Floor.html",roomNames:[]},{id:"3",map:"Third-Floor.html",roomNames:[]}]},{id:"L",name:"Building L",dir:"Building/L/",floorIndex:0,floors:[{id:"1",map:"First-Floor.html",roomNames:[{name:"starbucks",id:"1102"},{name:"circulation-desk",id:"1136"}]},{id:"2",map:"Second-Floor.html",roomNames:[{name:"reference-desk",id:"2101"}]},{id:"3",map:"Third-Floor.html",roomNames:[{name:"heritage-room",id:"3148"},{name:"archives-and-special-collections",id:"3146"},{name:"grand-reading-room",id:"3111"},{name:"grand-reading",id:"3111"},{name:"quiet-reading-room",id:"3111"},{name:"quiet-reading",id:"3111"},{name:"reading-room",id:"3111"},{name:"quiet-room",id:"3111"}]}]}]};function getEvents(){debug.group("Getting Events"),Storage.prototype.setObj=function(e,o){this.setItem(e,JSON.stringify(o))};var a=0,r=[],s=new XMLHttpRequest;s.open("GET","https://cors-anywhere.herokuapp.com/http://www.ggc.edu/student-life/events-calendar/events-calendar/summary"),s.send(null),s.onreadystatechange=function(){if(4==s.readyState){for(var e,o=(new DOMParser).parseFromString(s.responseText,"text/html").querySelectorAll(".SECalendarSummaryDate"),n=0;n<o.length;n++)if("SECalendarSummaryDate"!=o[n].className)debug.msg(!1);else if(1<o[n].querySelectorAll(".SECalendarPropertyContainer").length)for(var t=0;t<o[n].querySelectorAll(".SECalendarPropertyContainer").length;t++)e=o[n].querySelectorAll(".SECalendarSummaryDateEventList"),r[a]=new Array(o[n].querySelector("h3").innerText,e[0].children[t].querySelector(".SECalendarEventName").innerText,e[0].children[t].children[0].children[2].innerText,e[0].children[t].children[0].children[4].innerText.replace(/^\s+|\s+$/g,"")),a+=1;else e=o[n].querySelectorAll(".SECalendarPropertyContainer"),r[a]=new Array(o[n].querySelector("h3").innerText,o[n].querySelector(".SECalendarEventName").innerText,e[0].children[2].innerText,e[0].children[4].innerText.replace(/^\s+|\s+$/g,"")),a+=1;localStorage.setObj("event_key",r),localStorage.setObj("eventNumber_key",a);var i=new Date;i.getFullYear(),i.getMonth();localStorage.setObj("event_updated",i.getMonth()+1+"/"+i.getDate()),checkLocalStorage()}},debug.end()}function insertEvents(e,o){debug.group("Insert Events");for(var n=new Date,t=(n.getFullYear(),n.getMonth(),/[a-zA-Z]\-[A-Z|0-9][0-9]+/),i=0;i<o;i++){var a=e[i][0].substring(e[i][0].search(n.toLocaleString("en",{month:"long"}))+n.toLocaleString("en",{month:"long"}).length,e[i][0].lastIndexOf(","));if(a>=n.getDate()&&a<=n.getDate()+14){var r=document.createElement("div");r.className="event";var s=document.createElement("div");s.className="tab-group";var d=document.createElement("h5");d.innerText=e[i][1];var l=document.createElement("p");l.innerText=e[i][0];var m=document.createElement("p");m.innerText=e[i][2];var u=document.createElement("p");u.innerText=e[i][3];var c=document.createElement("a"),g=e[i][3].replace(/ /g,""),p=e[i][3].split(", ");if(1==p[0].includes("(")){var h=p[0].search("\\("),b=p[0].search("\\)");p[0]=p[0].replace(p[0].substr(h-1,b),"")}var f=p[0].split(" "),v=!1,C=document.querySelectorAll("div#campusEvents")[0].children[0].children[2];if(1==t.test(g))c.setAttribute("onclick","closeTab('campusEvents');"),c.setAttribute("href","#"+t.exec(g)[0].replace("-","")),c.appendChild(d),c.appendChild(l),c.appendChild(m),c.appendChild(u),r.appendChild(c),s.appendChild(r),1==t.exec(g)[0].includes("C-G")?r.id="W":"C"==t.exec(g)[0].substr(0,1)&&1300<parseInt(t.exec(g)[0].substr(2,4))&&parseInt(t.exec(g)[0].substr(2,4))<2e3||"C"==t.exec(g)[0].substr(0,1)&&2300<parseInt(t.exec(g)[0].substr(2,4))&&parseInt(t.exec(g)[0].substr(2,4))<3e3?r.id="W":r.id=t.exec(g)[0].substr(0,1),C.appendChild(s);else{for(var y,E="",N=0;N<campus.buildings.length;N++){for(var w=0;w<campus.buildings[N].floors.length;w++){for(var k=0;k<campus.buildings[N].floors[w].roomNames.length;k++){if(2<=f.length&&1==campus.buildings[N].floors[w].roomNames[k].name.toLowerCase().includes(f[0].toLowerCase()+"-"+f[1].toLowerCase())){v=!0,E=campus.buildings[N].floors[w].roomNames[k].name,y=campus.buildings[N].id.toUpperCase();break}if(1==f.length&&1==campus.buildings[N].floors[w].roomNames[k].name.toLowerCase().includes(f[0].toLowerCase())){debug.msg("test"),v=!0,E=campus.buildings[N].floors[w].roomNames[k].name,y=campus.buildings[N].id.toUpperCase();break}}if(""!==E)break}if(""!==E){debug.msg("Name from JSON: "+E);break}}if(1==v)c.setAttribute("onclick","closeTab('campusEvents');"),c.setAttribute("href","#"+E),r.id=y,c.appendChild(d),c.appendChild(l),c.appendChild(m),c.appendChild(u),r.appendChild(c),s.appendChild(r),C.appendChild(s);else if(1<p.length&&1==p[1].includes("Building")||1<p.length&&1==p[0].includes("Building"))if(1==p[1].includes("Building"))c.setAttribute("onclick","closeTab('campusEvents');"),c.setAttribute("href","#"+p[1].substr(p[1].search("Building")+9)),r.id=p[1].substr(p[1].search("Building")+9),c.appendChild(d),c.appendChild(l),c.appendChild(m),c.appendChild(u),r.appendChild(c),s.appendChild(r),C.appendChild(s);else{c.setAttribute("onclick","closeTab('campusEvents');"),c.setAttribute("href","#"+p[0].substr(p[0].search("Building")+9)+/[A-Z|0-9][0-9]+/.exec(p[1])),r.id=p[0].substr(p[0].search("Building")+9),c.appendChild(d),c.appendChild(l),c.appendChild(m),c.appendChild(u),r.appendChild(c),s.appendChild(r),C.appendChild(s)}else 2==f.length&&1==f[0].includes("Building")&&1==f[1].length?(c.setAttribute("onclick","closeTab('campusEvents');"),c.setAttribute("href","#"+f[1]),r.id=f[1],c.appendChild(d),c.appendChild(l),c.appendChild(m),c.appendChild(u),r.appendChild(c)):1==e[i][3].includes("Student Center")?(c.setAttribute("onclick","closeTab('campusEvents');"),c.setAttribute("href","#E"),r.id="E",c.appendChild(d),c.appendChild(l),c.appendChild(m),c.appendChild(u),r.appendChild(c)):(r.appendChild(d),r.appendChild(l),r.appendChild(m),r.appendChild(u)),s.appendChild(r),C.appendChild(s)}}}debug.end()}function checkLocalStorage(){debug.group("Check Local Storage"),Storage.prototype.getObj=function(e){return JSON.parse(this.getItem(e))};var e=navigator.onLine,o=new Date;o.getFullYear(),o.getMonth();1==e?null==localStorage.getObj("event_key")||null==localStorage.getObj("eventNumber_key")?getEvents():localStorage.getObj("event_updated")!=o.getMonth()+1+"/"+o.getDate()?getEvents():insertEvents(localStorage.getObj("event_key"),localStorage.getObj("eventNumber_key")):null==localStorage.getObj("event_key")||null==localStorage.getObj("eventNumber_key")?debug.msg("No connection to retrieve events"):insertEvents(localStorage.getObj("event_key"),localStorage.getObj("eventNumber_key")),debug.end()}function sortEvents(){debug.group("Sort Events");var e,o=0,n=document.querySelectorAll("div.event");if(document.querySelectorAll("h5.no-events")[0].style.display="none",window.location.hash.length<=2){for(e=0;e<n.length;e++)window.location.hash.substr(1)!=n[e].id?(n[e].style.display="none",o++):window.location.hash.substr(1)==n[e].id&&(n[e].style.display="block");o==n.length&&(document.querySelectorAll("h5.no-events")[0].style.display="block")}else if(1==/[A-Z][A-Z|0-9][0-9]+/.test(window.location.hash.substr(1)))if(1==window.location.hash.includes("CG")||1==window.location.hash.includes("C")&&1300<window.location.hash.substr(2,4)&&window.location.hash.substr(2,4)<1400||1==window.location.hash.includes("C")&&2300<window.location.hash.substr(2,4)&&window.location.hash.substr(2,4)<2400){for(e=0;e<n.length;e++)"W"==n[e].id?n[e].style.display="block":(n[e].style.display="none",o++);o==n.length&&(document.querySelectorAll("h5.no-events")[0].style.display="block")}else{for(e=0;e<n.length;e++)window.location.hash.substr(1,1)==n[e].id?n[e].style.display="block":(n[e].style.display="none",o++);o==n.length&&(document.querySelectorAll("h5.no-events")[0].style.display="block")}else if("#Campus"==window.location.hash)for(e=0;e<n.length;e++)n[e].style.display="block";else{for(var t,i=0;i<campus.buildings.length;i++)for(var a=0;a<campus.buildings[i].floors.length;a++)for(var r=0;r<campus.buildings[i].floors[a].roomNames.length;r++)window.location.hash.substr(1)==campus.buildings[i].floors[a].roomNames[r].name&&(t=campus.buildings[i].id,debug.msg(t));for(e=o=0;e<n.length;e++)n[e].id==t?(n[e].style.display="block",o++):n[e].style.display="none";o==n.length&&(document.querySelectorAll("h5.no-events")[0].style.display="block")}openTab("campusEvents"),debug.end()}function cookieMold(e,o,n){debug.group("Cookie Mold");var t=new Date;t.setTime(t.getTime()+24*n*60*60*1e3);var i="expires="+t.toUTCString();document.cookie=e+"="+o+";"+i+";path=/",debug.end()}function eatCookie(e){debug.group("Eat Cookie");for(var o=e+"=",n=decodeURIComponent(document.cookie).split(";"),t=0;t<n.length;t++){for(var i=n[t];" "==i.charAt(0);)i=i.substring(1);if(0===i.indexOf(o))return i.substring(o.length,i.length)}return debug.end(),""}function agreePage(e){debug.group("Agree Page"),document.cookie="agreement="+e,window.location.replace("index.html"),debug.end()}function visitCheck(){(debug.group("Visit Check"),""===eatCookie("visits")||null===eatCookie("visits"))?cookieMold("visits",1,1):(cookieMold("visits",parseInt(eatCookie("visits"))+1,1),"show"===eatCookie("legend")&&(document.getElementById("legendSwitch").checked=!0));debug.end()}function cookieLegend(){debug.group("Cookie Legend");var e=eatCookie("legend").toUpperCase();if(null!==eatCookie("legend"))switch(e){case"HIDE":cookieMold("legend","show",9999),debug.msg("Now Showing");break;case"SHOW":cookieMold("legend","hide",9999),debug.msg("Now Hiding");break;default:debug.msg("Done changing")}debug.end()}function firstLegend(){debug.group("First Legend"),""!==eatCookie("visits")&&null!==eatCookie("visits")||cookieMold("legend","hide",9999),debug.end()}var debug={active:!1,group:function(e){this.active&&console.group(e)},end:function(){console.groupEnd()},msg:function(e){this.active&&console.log(e)},error:function(e){this.active&&console.error(e)}};function switchMap(e){debug.group("Switch Map");var o={map:"",building:"",floor:"",room:"",roomName:""},n=parseSearch(e),t=n.building,i=n.room;o.roomName=n.roomName,debug.msg('RoomName "'+o.roomName+'"'),"campus"===t.toLowerCase()?(o.map=campus.map,o.building="Campus"):""===t.toLowerCase()&&""===o.roomName&&(t=document.getElementById("building").innerHTML,o.builing=t);for(var a=0;a<campus.buildings.length;a++)if(""!==o.roomName&&void 0!==o.roomName&&null!==o.roomName){debug.msg("Search Room Names");for(var r=0;r<campus.buildings[a].floors.length;r++){for(var s=0;s<campus.buildings[a].floors[r].roomNames.length;s++)if(o.roomName.toLowerCase()===campus.buildings[a].floors[r].roomNames[s].name.toLowerCase()){o.building=campus.buildings[a].id,o.floor=campus.buildings[a].floors[r].id,o.room=campus.buildings[a].floors[r].roomNames[s].id,o.map=campus.buildings[a].dir+campus.buildings[a].floors[r].map;break}if(""!==o.map)break}if(""!==o.map)break}else if(t.toUpperCase()===campus.buildings[a].id.toUpperCase()){if(o.building=campus.buildings[a].id,null===i||void 0===n.room||""===n.room){o.floor=campus.buildings[a].floors[0].id,o.map=campus.buildings[a].dir+campus.buildings[a].floors[0].map,o.room=i;break}for(var d=0;d<campus.buildings[a].floors.length;d++)if(i[campus.buildings[a].floorIndex].toUpperCase()===campus.buildings[a].floors[d].id.toUpperCase()||"".toUpperCase()===campus.buildings[a].floors[d].id.toUpperCase()){o.floor=campus.buildings[a].floors[d].id,o.map=campus.buildings[a].dir+campus.buildings[a].floors[d].map,o.room=i;break}}return debug.msg("Building= "+o.building),debug.msg("Floor= "+o.floor),debug.msg("Map= "+o.map),debug.msg("Room= "+o.room),""!==o.roomName&&""===o.map?(alert('Were you trying to search by nickname? Unfortunately, "'+name+'" is not recognized.\nPlease check your spelling, or try a more common name.\n\nExample: Search for "Moes" not "Mo"'),o.building="Campus",o.map=campus.map):""===o.map&&(debug.error('Did you mean to search for "'+n.builing+" "+n.room+"\"?\nThat building doesn't exist."),alert("Did you mean to search for building "+n.building+"?\nThat building doesn't exist."),o.building="Campus",o.map=campus.map),debug.end(),o}function getFloorMap(e,o){debug.group("Get Floor Map"),o=null!=o&&""===o?"1":o;var n="";if("campus"===e.toLowerCase())n=campus.map;else for(var t=0;t<campus.buildings.length;t++)if(e.toUpperCase()===campus.buildings[t].id.toUpperCase())for(var i=0;i<campus.buildings[t].floors.length;i++)o.toUpperCase()===campus.buildings[t].floors[i].id.toUpperCase()&&(n=campus.buildings[t].dir+campus.buildings[t].floors[i].map);return""===n&&debug.error("Map not found Building: "+e+" Floor: "+o),debug.end(),n}function addMap(e,d,l){debug.group("Add Map");var m=document.getElementById("building"),u=document.getElementById("floor"),c=document.getElementById("svg-holder");return new Promise(function(a,r){var s=new XMLHttpRequest;s.open("GET",e,!0),s.onload=function(){if(200!==s.status&&r(Error(s.statusText)),d!==m){var e=document.getElementById("building-popup"),o=document.getElementsByClassName("dropdown")[0],n=document.getElementsByClassName("campus-info")[0];"Campus"===d?(hideElement(e,HIDE),"show"===eatCookie("legend")?(hideElement(n,SHOW),document.getElementById("pLegend").style.display="inherit"):(hideElement(n,HIDE),document.getElementById("pLegend").style.display="none")):(hideElement(e,SHOW),hideElement(n,HIDE)),void 0!==l?(hideElement(u,SHOW),hideElement(o,SHOW),floorDropDown(d),u.innerHTML="FL"+l):(hideElement(u,HIDE),hideElement(o,HIDE))}removeMap(),c.appendChild(convertToElement(s.response));var t=c.childNodes[0];t.style.height=getClientHeight(),m.innerHTML=d;var i=svgPanZoom(t,{controlIconsEnabled:!0,fit:1,center:1,customEventsHandler:{haltEventListeners:["touchStart","touchend","touchmove","touchleave","touchcancel"],init:function(e){var o=e.instance,n=1,t=0,i=0;this.hammer=Hammer(e.svgElement,{inputClass:Hammer.SUPPORT_POINTER_EVENTS?Hammer.PointerEventInput:Hammer.TouchInput}),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("doubletap",function(e){o.zoomIn()}),this.hammer.on("panstart panmove",function(e){"panstart"===e.type&&(i=t=0),o.panBy({x:e.deltaX-t,y:e.deltaY-i}),t=e.deltaX,i=e.deltaY}),this.hammer.on("pinchstart pinchmove",function(e){"pinchstart"===e.type&&(n=o.getZoom(),o.zoom(n*e.scale)),o.zoom(n*e.scale)}),this.hammer.on("tap",function(e){if(toggleTab(e,"helpbox"),toggleTab(e,"campusEvents"),"Campus"===d){var o=e.target.parentNode.id;if(null!=o)for(var n in campus.buildings)if(o.toUpperCase()===campus.buildings[n].id.toUpperCase()){changeFloor(campus.buildings[n].id,campus.buildings[n].floors[0].id);break}}else{var t=e.target.parentNode.id;4!==t.length&&5!==t.length||(debug.msg("addMap calls activateRoom"),activateRoom(e.target.parentNode.id))}}),e.svgElement.addEventListener("touchmove",function(e){e.preventDefault()})},destroy:function(){this.hammer.destroy()}}});window.addEventListener("resize",function(){t.style.height=getClientHeight(),i.resize(),i.fit(),i.center()}),a(s.response)},s.onerror=function(){r(Error("Network Error"))},s.send(),debug.end()})}function removeMap(){debug.group("Remove Map");for(var e=document.getElementById("svg-holder");e.hasChildNodes();)e.removeChild(e.lastChild);debug.end()}function openMenu(){debug.group("Open Menu");var e=document.getElementsByClassName("nav")[0],o=document.getElementsByClassName("content-disable")[0];"nav"===e.className&&(e.classList.add("nav-active"),o.classList.add("active")),debug.end()}function closeMenu(){debug.group("Close Menu");var e=document.getElementsByClassName("nav")[0],o=document.getElementsByClassName("content-disable")[0];"nav nav-active"===e.className&&(e.classList.remove("nav-active"),o.classList.remove("active"));var n=document.getElementsByClassName("floors")[0];"floors floors-active"===n.className&&n.classList.remove("floors-active"),debug.end()}function subMenu(e){debug.group("Sub Menu");var o=document.getElementsByClassName(e)[0];o.className===e?o.classList.add("subMenu-active"):o.className===e+" subMenu-active"&&o.classList.remove("subMenu-active"),debug.end()}var urlTimer,HIDE=!0,SHOW=!1;function urlRoom(){if(debug.group("URL Room"),-1<window.navigator.userAgent.indexOf("Edge"));else{var e=window.location.hash,o=e.substring(e.lastIndexOf("#")+1);if(""===o||o.includes(".")||"campus"===o.toLowerCase())addMap(campus.map,"Campus").then(function(e){window.location.hash="Campus",document.getElementById("search").value=""},function(e){debug_error("Failed!",e)});else searchRoomNumber(switchMap(o))}debug.end()}function floorDropDown(e){debug.group("Floor DropDown");for(var o=document.getElementsByClassName("floors")[0];o.hasChildNodes();)o.removeChild(o.lastChild);for(var n=[],t=0;t<campus.buildings.length;t++)e.toUpperCase()===campus.buildings[t].id.toUpperCase()&&(n=campus.buildings[t].floors);for(var i=0;i<n.length;i++){var a="<h2 onclick=\"changeFloor('"+e+"', '"+n[i].id+"')\">Floor "+n[i].id+"</h2>";o.appendChild(convertToElement(a))}debug.end()}function activateRoom(e,o){if(debug.group("Activate Room"),debug.msg("Attempt to activate: "+e),"4983"!==e){var n="room-group",t=document.getElementById(e.toLowerCase());if(null===t)alert("Sorry, room number "+e+" couldn't be found in this building.");else{var i=t.className.baseVal;if(i!==n&&!o)return i===n+" active-room"?void deactivateAllRooms():void 0;i===n&&(deactivateAllRooms(),debug.msg("Activate: "+e),t.classList.add("active-room"))}debug.end()}}function deactivateAllRooms(){debug.group("Deactivate All Rooms");for(var e=document.getElementsByClassName("room-group"),o=0;o<e.length;o++)e[o].classList.remove("active-room");debug.end()}function changeFloor(o,e){debug.group("Change Floor"),closeMenu();var n=o.toUpperCase();(document.getElementById("roomSearch").value="")!==(n=getFloorMap(o,e))&&addMap(n,o,e).then(function(e){window.location.hash=o,debug.msg("urlRoom stopped by changeFloor"),clearTimeout(urlTimer)},function(e){debug.error("Failed!",e)}),safetyOff(),debug.end()}function searchSuggest(e){debug.group("Search Suggest");var o=document.getElementById("roomSearch").value.toUpperCase();roomList=document.getElementById("rooms");var n=[],t=[],i="undefined"!=typeof InstallTrigger,a="";if(loadSearch("Building\\AllRooms.txt"),n=document.getElementById("arrayStore").value.split(","),debug.msg(o),i){if(""==roomList.innerHTML){for(var r=0;r<n.length-1;r++)a+='<option value="'+n[r]+'" />';roomList.innerHTML="<select>"+a+"</select>"}}else{for(var s=0;s<=n.length-1;s++)n[s].includes(o)&&t.push(n[s]);debug.msg(t);for(var d=0;d<4&&d<=t.length-1;d++)a+='<option value="'+t[d]+'" />';roomList.innerHTML="<select>"+a+"</select>"}debug.end()}function loadSearch(t){return new Promise(function(e,o){debug.group("Load Search");var n=new XMLHttpRequest;n.open("GET",t,!0),n.onload=function(){200!==n.status&&o(Error(n.statusText)),document.getElementById("arrayStore").value=n.responseText.split("\n"),e(n.response)},n.onerror=function(){o(Error("Network Error"))},n.send(),debug.end()})}function searchFromBar(e){debug.group("Search From Bar"),13!=e.which&&13!=e.keyCode||(debug.msg("searchFromBar calls searchRoomNumber"),searchRoomNumber()),debug.end()}function searchFromMenu(e){debug.group("Search From Menu"),closeMenu(),debug.msg("searchFromMenu calls parseSearch");var o=switchMap(e);""!==o.roomName?document.getElementById("roomSearch").value=o.roomName:document.getElementById("roomSearch").value=o.building+" "+o.room,debug.msg("searchFromMenu calls searchRoomNumber"),searchRoomNumber(o),debug.end()}function searchRoomNumber(e){var o;if(debug.group("Search Room Number"),void 0!==e?(debug.msg("Data Passed"),o=e):(debug.msg("Data Not Passed"),o=switchMap(document.getElementById("roomSearch").value)),debug.msg(o),"campus"===o.roomName.toLowerCase()||"campus"===o.building.toLowerCase())document.getElementById("roomSearch").value="",changeFloor("Campus");else{var n="4983",t=document.getElementById("building").innerHTML,i=document.getElementById("floor").innerHTML,a="",r="";""!==o.building&&(debug.msg("New Building: "+o.building),a=o.building),""!==o.floor&&(debug.msg("New Floor: "+o.floor),r=o.floor),debug.msg("New Room: "+o.room),""!==o.room&&(n=o.room);debug.group("Upper Hash"),""!==o.roomName?window.location.hash=o.roomName:window.location.hash="4983"!==n?a.toUpperCase()+"-"+n.toUpperCase():a.toUpperCase(),debug.msg("urlRoom stopped by upperHash()"),clearTimeout(urlTimer),debug.end(),t!==a||i!==r?(debug.msg("searchRoomNumber calls searchNewFloor"),searchNewFloor(a,r,n,o.map)):(debug.msg("searchRoomNumber calls activateRoom"),activateRoom(n,!0))}debug.end()}function searchNewFloor(e,o,n,t){debug.group("Search New Floor");var i=e,a=document.getElementById("building"),r=document.getElementById("floor");a.innerHTML===e&&r.innerHTML===o||""!==(i=t)&&(debug.msg("searchNewFloor calls addMap"),addMap(i,e,o).then(function(e){debug.msg("searchNewFloor calls activateRoom"),activateRoom(n,!0)},function(e){debug.error("Failed!",e)})),debug.end()}var helpFile="help.html",campusEventsFile="campusEvents.html";function openTab(e){debug.group("Open Tab"),closeMenu();var o=document.getElementById(e);if(!o.classList.contains("tab-active")){o.classList.toggle("tab-active");var n=tabContentHeight(e);o.childNodes[0].childNodes[7].style.height=n+"px"}debug.end()}function closeTab(e){debug.group("Close Tab");var o=document.getElementById(e);o.classList.contains("tab-active")&&o.classList.toggle("tab-active"),debug.end()}function tabContentHeight(e){debug.group("Tab Content Height");var o=window.innerHeight||document.body.clientHeight,n=document.getElementById(e).childNodes[0].childNodes[1].clientHeight;return debug.end(),o-n}function isLetter(e){return e.toLowerCase()!==e.toUpperCase()}function isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}function parseSearch(e){debug.group("Parse Search");var o=e.split(/[ \+-\s<>'"();/\\]+/),n="",t="",i="";debug.msg("Search: "+e);for(var a=0;a<o.length;a++)1===o[a].length&&isLetter(o[a])&&0===a?n=o[a]:4===o[a].length?isNumeric(o[a])?"2000"==o[a]||"3000"==o[a]?n=o[a][0]:t=o[a]:"G"===o[a].charAt(0).toUpperCase()&&isNumeric(o[a].substring(1))?(t=o[a],n="C"):(""!==i&&(i+="-"),i+=o[a]):5===o[a].length?isNumeric(o[a].substring(1))?(t=o[a].substring(1),n=o[a].charAt(0)):isNumeric(o[a].substring(0,4))?t=o[a]:(""!==i&&(i+="-"),i+=o[a]):6===o[a].length&&isNumeric(o[a].substring(1,5))?(t=o[a].substring(1),n=o[a].charAt(0)):(""!==i&&(i+="-"),i+=o[a]);""===n&&""===t&&""!==i&&isLetter(e[0])&&isNumeric(e[2])&&(n=e[0],t=e.substring(1),i=""),"C"===n.toUpperCase()&&"3"===t[1]&&(n="W",i="");var r={building:n,room:t,roomName:i.toLowerCase()};return debug.msg(r),debug.end(),r}function activatePopup(e,o){debug.group("Activate Popup"),e.onmouseover=function(){document.getElementById(o).classList.toggle("popup-active")},e.onmouseout=function(){document.getElementById(o).classList.toggle("popup-active")},debug.end()}function convertToElement(e){debug.group("Convert to Element");var o=document.createElement("div");return o.innerHTML=e,debug.end(),o.childNodes[0]}function getClientHeight(){return(window.innerHeight||document.body.clientHeight)+"px"}function dropdown(e,o){debug.group("Drop Down"),document.getElementsByClassName(e)[0].classList.toggle(o),debug.end()}function resetWidth(e){debug.group("Reset Width"),debug.msg("resize"),e.resize(),e.fit(),e.center(),debug.end()}function hideElement(e,o){debug.group("Hide Element"),o?e.classList.contains("hide")||e.classList.toggle("hide"):e.classList.contains("hide")&&e.classList.toggle("hide"),debug.end()}function loadFile(t,i){return new Promise(function(e,o){debug.group("Load File");var n=new XMLHttpRequest;n.open("GET",i,!0),n.onload=function(){200!==n.status&&o(Error(n.statusText)),document.getElementById(t).appendChild(convertToElement(n.response)),e(n.response)},n.onerror=function(){o(Error("Network Error"))},n.send(),debug.end()})}function toggleTab(e,o){debug.group("Toggle Tab");var n=document.getElementById(o);!isDescendant(n,e.target)&&n.classList.contains("tab-active")&&n.classList.toggle("tab-active"),debug.end()}function isDescendant(e,o){debug.group("Is Decendant");for(var n=o.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return debug.end(),!1}document.addEventListener("DOMContentLoaded",function(){debug.group("DOM Content Loaded"),loadFile("helpbox",helpFile).then(function(e){},function(e){debug.error("Failed!",e)}),loadFile("campusEvents",campusEventsFile).then(function(e){checkLocalStorage()},function(e){debug.error("Failed!",e)});var e=document.getElementById("building"),o=document.getElementById("floor"),n=document.getElementById("menu"),t=document.getElementById("search");activatePopup(e,"building-popup"),activatePopup(o,"floor-popup"),activatePopup(n,"menu-popup"),activatePopup(t,"search-popup"),urlRoom(),window.addEventListener("popstate",function(e){debug.msg("website auto calls urlRoom"),urlTimer=setTimeout(function(){urlRoom()},100)}),debug.end()});
